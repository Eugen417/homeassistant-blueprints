blueprint: 
  name: üìÑ –ó–∞–ø–∏—Å—å –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –≤ Google Sheets + Telegram
  description: '–ï–∂–µ–º–µ—Å—è—á–Ω–æ (–≤ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–µ–Ω—å) –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –ø–æ–∫–∞–∑–∞–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤ –•–í–°, –ì–í–°, –≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏–∏, –ì–∞–∑–∞ –∏ –¢–µ–ø–ª–∞ –∑–∞ **–ø—Ä–µ–¥—ã–¥—É—â–∏–π –º–µ—Å—è—Ü** –≤ Google Sheets –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram. –ó–∞–ø—É—Å–∫ –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ 00:00:01.'
  domain: automation
  source_url: https://raw.githubusercontent.com/Eugen417/homeassistant-blueprints/refs/heads/main/kommunalnye_schetchiki_google_sheets.yaml
  
  input:
    # 1. –°–ï–ù–°–û–†–´ –°–ß–ï–¢–ß–ò–ö–û–í –ò –ò–• –ù–û–ú–ï–†–ê
    
    sensor_hvs_1:
      name: üíß –•–í–° 1 (–°–µ–Ω—Å–æ—Ä)
      description: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–Ω—Å–æ—Ä —Å—á–µ—Ç—á–∏–∫–∞ –•–í–° 1. –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω.'
      default: null
      selector:
        entity:
          domain: sensor
    meter_number_hvs_1:
      name: –ù–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –•–í–° 1 (–¥–ª—è Telegram)
      description: '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 6-8 —Ü–∏—Ñ—Ä). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - –•–í–° 1.'
      default: "–•–í–° 1"
      selector:
        text:

    sensor_hvs_2:
      name: üíß –•–í–° 2 (–°–µ–Ω—Å–æ—Ä)
      description: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–Ω—Å–æ—Ä —Å—á–µ—Ç—á–∏–∫–∞ –•–í–° 2. –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω.'
      default: null
      selector:
        entity:
          domain: sensor
    meter_number_hvs_2:
      name: –ù–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –•–í–° 2 (–¥–ª—è Telegram)
      description: '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 6-8 —Ü–∏—Ñ—Ä). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - –•–í–° 2.'
      default: "–•–í–° 2"
      selector:
        text:

    sensor_gvs_1:
      name: ü©∏ –ì–í–° 1 (–°–µ–Ω—Å–æ—Ä)
      description: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–Ω—Å–æ—Ä —Å—á–µ—Ç—á–∏–∫–∞ –ì–í–° 1. –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω.'
      default: null
      selector:
        entity:
          domain: sensor
    meter_number_gvs_1:
      name: –ù–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –ì–í–° 1 (–¥–ª—è Telegram)
      description: '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 6-8 —Ü–∏—Ñ—Ä). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - –ì–í–° 1.'
      default: "–ì–í–° 1"
      selector:
        text:

    sensor_gvs_2:
      name: ü©∏ –ì–í–° 2 (–°–µ–Ω—Å–æ—Ä)
      description: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–Ω—Å–æ—Ä —Å—á–µ—Ç—á–∏–∫–∞ –ì–í–° 2. –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω.'
      default: null
      selector:
        entity:
          domain: sensor
    meter_number_gvs_2:
      name: –ù–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –ì–í–° 2 (–¥–ª—è Telegram)
      description: '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 6-8 —Ü–∏—Ñ—Ä). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - –ì–í–° 2.'
      default: "–ì–í–° 2"
      selector:
        text:

    sensor_t1:
      name: ‚ö° –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ T1 (–°–µ–Ω—Å–æ—Ä)
      description: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–Ω—Å–æ—Ä —Å—á–µ—Ç—á–∏–∫–∞ –≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏–∏ (–¢–∞—Ä–∏—Ñ 1).'
      default: null
      selector:
        entity:
          domain: sensor
    meter_number_t1:
      name: –ù–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ T1 (–¥–ª—è Telegram)
      description: '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ T1.'
      default: "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ T1"
      selector:
        text:

    sensor_t2:
      name: ‚ö° –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ T2 (–°–µ–Ω—Å–æ—Ä)
      description: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–Ω—Å–æ—Ä —Å—á–µ—Ç—á–∏–∫–∞ –≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏–∏ (–¢–∞—Ä–∏—Ñ 2).'
      default: null
      selector:
        entity:
          domain: sensor
    meter_number_t2:
      name: –ù–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ T2 (–¥–ª—è Telegram)
      description: '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ T2.'
      default: "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ T2"
      selector:
        text:

    sensor_t3:
      name: ‚ö° –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ T3 (–°–µ–Ω—Å–æ—Ä)
      description: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–Ω—Å–æ—Ä —Å—á–µ—Ç—á–∏–∫–∞ –≠–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏–∏ (–¢–∞—Ä–∏—Ñ 3).'
      default: null
      selector:
        entity:
          domain: sensor
    meter_number_t3:
      name: –ù–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ T3 (–¥–ª—è Telegram)
      description: '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ T3.'
      default: "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ T3"
      selector:
        text:

    sensor_gas:
      name: ‚ô®Ô∏è –ì–∞–∑ (–°–µ–Ω—Å–æ—Ä)
      description: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–Ω—Å–æ—Ä —Å—á–µ—Ç—á–∏–∫–∞ –ì–∞–∑–∞. –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω.'
      default: null
      selector:
        entity:
          domain: sensor
    meter_number_gas:
      name: –ù–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –ì–∞–∑–∞ (–¥–ª—è Telegram)
      description: '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - –ì–∞–∑.'
      default: "–ì–∞–∑"
      selector:
        text:

    sensor_heat:
      name: üå°Ô∏è –¢–µ–ø–ª–æ (–°–µ–Ω—Å–æ—Ä)
      description: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–Ω—Å–æ—Ä —Å—á–µ—Ç—á–∏–∫–∞ –¢–µ–ø–ª–∞. –û—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º, –µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω.'
      default: null
      selector:
        entity:
          domain: sensor
    meter_number_heat:
      name: –ù–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –¢–µ–ø–ª–∞ (–¥–ª—è Telegram)
      description: '–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é - –¢–µ–ø–ª–æ.'
      default: "–¢–µ–ø–ª–æ"
      selector:
        text:

    # 4. –ù–ê–°–¢–†–û–ô–ö–ò –ó–ê–ü–£–°–ö–ê
    execution_day:
      name: üìÖ –î–µ–Ω—å –º–µ—Å—è—Ü–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞
      description: '–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–Ω—å –º–µ—Å—è—Ü–∞ (1-31), –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∑–∞–ø–∏—Å—å –ø–æ–∫–∞–∑–∞–Ω–∏–π. –ï—Å–ª–∏ –≤ –º–µ—Å—è—Ü–µ –Ω–µ—Ç —Ç–∞–∫–æ–≥–æ –¥–Ω—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 31 —Ñ–µ–≤—Ä–∞–ª—è), –∑–∞–ø—É—Å–∫ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å –º–µ—Å—è—Ü–∞.'
      default: 1
      selector:
        number:
          min: 1
          max: 31
          mode: box

    # 2. –ù–ê–°–¢–†–û–ô–ö–ò GOOGLE SHEETS
    google_sheets_config:
      name: üìë Google Sheets (–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
      description: '–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (ID) –≤–∞—à–µ–π —Ç–∞–±–ª–∏—Ü—ã Google Sheets.'
      selector:
        select:
          options: []
          multiple: false
          custom_value: true
          
    google_sheets_worksheet:
      name: üìù –ò–º—è –ª–∏—Å—Ç–∞ –≤ —Ç–∞–±–ª–∏—Ü–µ
      description: '–¢–æ—á–Ω–æ–µ –∏–º—è –ª–∏—Å—Ç–∞/–≤–∫–ª–∞–¥–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–£—á–µ—Ç –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤").'
      selector:
        text:
            
    # 3. TELEGRAM (–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
    telegram_notify_target:
      name: üí¨ –¶–µ–ª–µ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ Telegram (–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
      description: '–í—ã–±–µ—Ä–∏—Ç–µ *–¶–µ–ª—å* (Target) Telegram –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è.'
      default: null
      selector:
        target:
          entity:
            - domain: notify
            
    sheets_link:
      name: üîó –°—Å—ã–ª–∫–∞ –Ω–∞ Google Sheets (–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
      description: 'URL-–∞–¥—Ä–µ—Å –≤–∞—à–µ–π —Ç–∞–±–ª–∏—Ü—ã Google Sheets –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ Telegram.'
      default: ""
      selector:
        text:

# =======================================================================
# –ê–í–¢–û–ú–ê–¢–ò–ó–ê–¶–ò–Ø
# =======================================================================
trigger:
  # 1. –¢–†–ò–ì–ì–ï–†: –°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 00:00:01
  - platform: time
    at: "00:00:01"

condition:
  # 2. –£–°–õ–û–í–ò–ï: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å –º–µ—Å—è—Ü–∞ —Ä–∞–≤–µ–Ω –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –¥–Ω—é,
  # –ò–õ–ò —á—Ç–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –¥–µ–Ω—å —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π, –Ω–æ —Å–µ–≥–æ–¥–Ω—è –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å –º–µ—Å—è—Ü–∞.
  - condition: template
    value_template: >
      {# –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é input_execution_day, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–µ –≤ —à–∞–±–ª–æ–Ω–µ #}
      {% set chosen_day = input_execution_day | int(1) %}
      {% set current_day = now().day %}
      {# –í—ã—á–∏—Å–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–Ω—å —Ç–µ–∫—É—â–µ–≥–æ –º–µ—Å—è—Ü–∞ #}
      {% set last_day_of_month = (now() + timedelta(days=1)).replace(day=1) - timedelta(days=1) %}

      {{ current_day == chosen_day or (chosen_day > last_day_of_month.day and current_day == last_day_of_month.day) }}
    
action:
  # 0. –û–ü–†–ï–î–ï–õ–ï–ù–ò–ï –ü–ï–†–ï–ú–ï–ù–ù–´–•
  - variables:
      # 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º –≤—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
      input_sensor_hvs_1: !input sensor_hvs_1
      input_sensor_hvs_2: !input sensor_hvs_2
      input_sensor_gvs_1: !input sensor_gvs_1
      input_sensor_gvs_2: !input sensor_gvs_2
      input_sensor_t1: !input sensor_t1
      input_sensor_t2: !input sensor_t2
      input_sensor_t3: !input sensor_t3
      input_sensor_gas: !input sensor_gas
      input_sensor_heat: !input sensor_heat
      
      input_meter_number_hvs_1: !input meter_number_hvs_1
      input_meter_number_hvs_2: !input meter_number_hvs_2
      input_meter_number_gvs_1: !input meter_number_gvs_1
      input_meter_number_gvs_2: !input meter_number_gvs_2
      input_meter_number_t1: !input meter_number_t1
      input_meter_number_t2: !input meter_number_t2
      input_meter_number_t3: !input meter_number_t3
      input_meter_number_gas: !input meter_number_gas
      input_meter_number_heat: !input meter_number_heat
      
      input_google_sheets_config: !input google_sheets_config
      input_google_sheets_worksheet: !input google_sheets_worksheet
      input_telegram_target: !input telegram_notify_target
      input_sheets_link: !input sheets_link
      
      input_execution_day: !input execution_day # –ù–û–í–û–ï: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–ª—è –¥–Ω—è –∑–∞–ø—É—Å–∫–∞
      
      # 2. –í—ã—á–∏—Å–ª—è–µ–º –∑–Ω–∞—á–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤
      # –•–í–°
      hvs1: "{{ states(input_sensor_hvs_1) | float(0) if input_sensor_hvs_1 is not none else '' }}"
      hvs2: "{{ states(input_sensor_hvs_2) | float(0) if input_sensor_hvs_2 is not none else '' }}"
      
      # –ì–í–°
      gvs1: "{{ states(input_sensor_gvs_1) | float(0) if input_sensor_gvs_1 is not none else '' }}"
      gvs2: "{{ states(input_sensor_gvs_2) | float(0) if input_sensor_gvs_2 is not none else '' }}"
      
      # –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ
      t1: "{{ states(input_sensor_t1) | float(0) if input_sensor_t1 is not none else '' }}"
      t2: "{{ states(input_sensor_t2) | float(0) if input_sensor_t2 is not none else '' }}"
      t3: "{{ states(input_sensor_t3) | float(0) if input_sensor_t3 is not none else '' }}"
      
      # –ü—Ä–æ—á–µ–µ
      gas: "{{ states(input_sensor_gas) | float(0) if input_sensor_gas is not none else '' }}"
      heat: "{{ states(input_sensor_heat) | float(0) if input_sensor_heat is not none else '' }}"
      
      # –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è (–ü–æ–∫–∞–∑–∞–Ω–∏—è –±–µ—Ä—É—Ç—Å—è –∑–∞ –ü–†–ï–î–´–î–£–©–ò–ô –¥–µ–Ω—å)
      current_year: "{{ (now() - timedelta(days=1)).strftime('%Y') }}"
      current_day: "{{ (now() - timedelta(days=1)).strftime('%d') }}"
      current_month_name: >
        {% set dt = now() - timedelta(days=1) %}
        {% set month_num = dt.month %}
        {% if month_num == 1 %}–Ø–Ω–≤–∞—Ä—å
        {% elif month_num == 2 %}–§–µ–≤—Ä–∞–ª—å
        {% elif month_num == 3 %}–ú–∞—Ä—Ç
        {% elif month_num == 4 %}–ê–ø—Ä–µ–ª—å
        {% elif month_num == 5 %}–ú–∞–π
        {% elif month_num == 6 %}–ò—é–Ω—å
        {% elif month_num == 7 %}–ò—é–ª—å
        {% elif month_num == 8 %}–ê–≤–≥—É—Å—Ç
        {% elif month_num == 9 %}–°–µ–Ω—Ç—è–±—Ä—å
        {% elif month_num == 10 %}–û–∫—Ç—è–±—Ä—å
        {% elif month_num == 11 %}–ù–æ—è–±—Ä—å
        {% else %}–î–µ–∫–∞–±—Ä—å{% endif %}
      
      # –ë–õ–û–ö TELEGRAM CHAT ID
      telegram_chat_id_str: >-
        {% set target_entity_id = input_telegram_target.get('entity_id', ['']) | first | default('') %}
        {% set final_id = '' %}
        {% if target_entity_id %}
          {% set chat_id_part = target_entity_id | regex_replace(find='^.+_', replace='') | string | trim %}
          {% set final_id = chat_id_part %}
          {% if final_id | length > 10 and not final_id.startswith('-') %}
            {% set final_id = '-' ~ final_id %}
          {% endif %}
        {% endif %}
        {{ final_id }}
        
  # 1. –ó–ê–ü–ò–°–¨ –í GOOGLE SHEETS
  - service: google_sheets.append_sheet
    data:
      config_entry: !input google_sheets_config
      worksheet: !input google_sheets_worksheet
      data:
        –ì–æ–¥: "{{ current_year }}"
        –ú–µ—Å—è—Ü: "{{ current_month_name }}"
        –•–í–° 1: "{{ hvs1 }}"
        –•–í–° 2: "{{ hvs2 }}"
        –ì–í–° 1: "{{ gvs1 }}"
        –ì–í–° 2: "{{ gvs2 }}"
        –¢1: "{{ t1 }}"
        –¢2: "{{ t2 }}"
        –¢3: "{{ t3 }}"
        –ì–∞–∑: "{{ gas }}"
        –¢–µ–ø–ª–æ: "{{ heat }}"

  # 2. –û–¢–ü–†–ê–í–ö–ê –í TELEGRAM
  - choose:
      - conditions:
          - condition: template
            value_template: "{{ telegram_chat_id_str | length > 0 }}"
        sequence:
          - service: telegram_bot.send_message
            metadata: {}
            data:
              chat_id: "{{ telegram_chat_id_str }}" 
              message: |
                ‚úÖ –ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –∑–∞–ø–∏—Å–∞–Ω—ã
                
                üìÑ –ü–æ–∫–∞–∑–∞–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ Google Sheets.
                {{ current_day }} {{ current_month_name }} {{ current_year }}
                –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
                
                üíß {{ input_meter_number_hvs_1 }}: {{ hvs1 or '---' }}
                üíß {{ input_meter_number_hvs_2 }}: {{ hvs2 or '---' }}
                ü©∏ {{ input_meter_number_gvs_1 }}: {{ gvs1 or '---' }}
                ü©∏ {{ input_meter_number_gvs_2 }}: {{ gvs2 or '---' }}
                ‚ö° {{ input_meter_number_t1 }}: {{ t1 or '---' }}
                ‚ö° {{ input_meter_number_t2 }}: {{ t2 or '---' }}
                ‚ö° {{ input_meter_number_t3 }}: {{ t3 or '---' }}
                ‚ô®Ô∏è {{ input_meter_number_gas }}: {{ gas or '---' }}
                üå°Ô∏è {{ input_meter_number_heat }}: {{ heat or '---' }}
                {% if input_sheets_link | length > 0 %}
                üîó <a href="{{ input_sheets_link }}">–û—Ç–∫—Ä—ã—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ä–∞—Å—Ö–æ–¥–æ–≤</a>
                {% endif %}
              parse_mode: html
        
mode: single
